(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/logo trivia sem tracado.e0674fb4.png"},35:function(e,t,a){e.exports=a(52)},45:function(e,t){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=a(14),s=a(11),l=a(3),u=a(4),d=a(6),m=a(5),p=a(2),f=a(12),b=a.n(f),h=a(16),y=a(22),v=a(30),g=a.n(v),E=function(e){return{type:"STORE_SCORE",payload:e}},k=a(31),O=a.n(k),j=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={inputEmail:"",inputName:"",desabilitado:!0},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(y.a)({},n,r),(function(){return e.desabilitar()}))},e.desabilitar=function(){var t=e.state,a=t.inputEmail,n=t.inputName;a&&n?e.setState({desabilitado:!1}):e.setState({desabilitado:!0})},e.handleSettingsClick=function(){e.props.history.push("./settings")},e.handleClick=Object(h.a)(b.a.mark((function t(){var a,n,r,c,o,i,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.inputName,r=a.inputEmail,e.gravatar(r,n),c=e.props.history,"https://opentdb.com/api_token.php?command=request",t.next=6,fetch("https://opentdb.com/api_token.php?command=request");case 6:return o=t.sent,t.next=9,o.json();case 9:return i=t.sent,s=localStorage.setItem("token",i.token),c.push("/game"),t.abrupt("return",s);case 13:case"end":return t.stop()}}),t)}))),e.gravatar=function(t,a){var n={},r=e.props.storePlayerDispatch,c=g()(t).toString();fetch("https://www.gravatar.com/avatar/".concat(c)).then((function(e){n={photo:e.url,name:a,email:t},r(n)}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.inputEmail,a=e.inputName,n=e.desabilitado;return r.a.createElement("div",{className:"login-container"},r.a.createElement("img",{src:O.a,alt:"logo-trivia",className:"trivia-logo"}),r.a.createElement("form",{className:"login-form"},r.a.createElement("label",{htmlFor:"email"},"Digite o seu E-mail",r.a.createElement("br",null),r.a.createElement("input",{className:"login-input",name:"inputEmail",value:t,type:"email","data-testid":"input-gravatar-email",id:"email",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"name"},"Digite o seu Nome",r.a.createElement("br",null),r.a.createElement("input",{className:"login-input",name:"inputName",value:a,type:"text","data-testid":"input-player-name",id:"name",onChange:this.handleChange})),r.a.createElement("button",{className:"btn",name:"btnPlay",disabled:n,onClick:this.handleClick,type:"button","data-testid":"btn-play"},"Play Classic"),r.a.createElement("button",{className:"btn",name:"btn-shuffle-mode",disabled:n,type:"button"},r.a.createElement(i.b,{to:"/shuffle",className:"btn--link-shuffle"},"Play Shuffle"))),r.a.createElement("button",{className:"login-config-btn btn",name:"btnSettings",onClick:this.handleSettingsClick,type:"button","data-testid":"btn-settings"},"Configura\xe7\xf5es"))}}]),a}(r.a.Component),S=Object(s.b)(null,(function(e){return{storePlayerDispatch:function(t){return e(function(e){return{type:"STORE_PLAYER",payload:e}}(t))}}}))(j),C=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),a}(r.a.Component),w=a(13),x=a(24),N=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.photo,a=e.name,n=e.score,c=document.location.pathname;return r.a.createElement("header",{className:"header ".concat("/feedback"===c?"header--feedback":"")},r.a.createElement("div",null,r.a.createElement("img",{src:t,alt:a,"data-testid":"header-profile-picture"}),r.a.createElement("span",{"data-testid":"header-player-name"},a)),r.a.createElement("p",{"data-testid":"header-score"},"Pontua\xe7\xe3o:"," ",n))}}]),a}(r.a.Component);N.defaultProps={photo:"https://www.gravatar.com/avatar/c19ad9dbaf91c5533605fbf985177ccc"};var q=Object(s.b)((function(e){return{photo:e.player.photoUrl,name:e.player.name,score:e.player.score}}))(N),A=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={questionList:[],nextQuestion:!1,qNum:0,endQuestions:!1,time:30,level:"",difficulty:0,currentInterval:"",mathRandomValue:""},e.componentDidMount=function(){e.fetchQuestions(),e.setState({mathRandomValue:Math.random()})},e.fetchQuestions=Object(h.a)(b.a.mark((function t(){var a,n,r,c,o,i,s,l,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.history,n=3,r=localStorage.getItem("token"),t.next=5,fetch("https://opentdb.com/api.php?amount=5&token=".concat(r));case 5:return c=t.sent,t.next=8,c.json();case 8:o=t.sent,o.response_code===n&&a.push("/"),i=o.results,s=Object(x.a)(i,1),l=s[0],u=l.difficulty,e.setState({questionList:i,level:u},(function(){e.setDifficulty(),e.renderQuestions()}));case 15:case"end":return t.stop()}}),t)}))),e.setDifficulty=function(){switch(e.state.level){case"hard":e.setState({difficulty:3});break;case"medium":e.setState({difficulty:2});break;case"easy":e.setState({difficulty:1});break;default:return 0}},e.calculateScore=function(){var t=e.props.storeScoreDispatch,a=e.state;t(10+a.time*a.difficulty)},e.renderQuestions=function(){var t=e.state,a=t.questionList,n=t.qNum,c=t.mathRandomValue;if(!a[n]||!c)return null;var o=r.a.createElement("button",{className:"btn","data-answer":"correct",key:"correct",type:"button","data-testid":"correct-answer",onClick:e.calculateScore},a[n].correct_answer),i=a[n].incorrect_answers.map((function(e,t){return r.a.createElement("button",{className:"btn","data-answer":"incorrect",key:t,type:"button","data-testid":"wrong-answer-".concat(t)},e)})),s=[o].concat(Object(w.a)(i)),l=[].concat(Object(w.a)(i),[o]);return c<.55?s:l},e.applyBorderColor=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t&&!t.type&&a)return null;var c=n?r:t.parentElement,o=Array.from(c.querySelectorAll("button"));o.forEach((function(e){"correct"===e.dataset.answer?e.style.border="".concat(a?"3px solid rgb(6 ,240, 15)":"thin inset #555"):e.style.border="".concat(a?"3px solid rgb(255, 0, 0)":"thin inset #555")})),e.setState({nextQuestion:!0})},e.renderText=function(t){var a=e.state,n=a.questionList,r=a.qNum;return n[r]?n[r]["".concat(t)]:null},e.handleClickNext=function(){var t=document.querySelector('button[data-name="btn-next"]').parentElement.previousElementSibling,a=e.state.qNum;a>3?e.setState({endQuestions:!0}):e.setState({qNum:a+1,nextQuestion:!0,time:30},(function(){e.timer(),e.handleBtnsDisabling(!1),e.applyBorderColor(null,!1,!0,t),e.setState({mathRandomValue:Math.random()})}))},e.timer=function(){var t=e.state.currentInterval;clearInterval(t);var a=setInterval((function(){e.setState((function(e){return{time:e.time-1}}),(function(){0===e.state.time&&(clearInterval(a),e.handleBtnsDisabling(!0))}))}),1e3);e.setState({currentInterval:a})},e.handleBtnsDisabling=function(e){var t=document.querySelector('button[data-answer="correct"]'),a=document.querySelectorAll('button[data-answer="incorrect"]');[t].concat(Object(w.a)(Array.from(a))).forEach((function(t){t.disabled=e}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.time,n=t.nextQuestion,c=t.endQuestions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null),r.a.createElement("section",{className:"game-container"},r.a.createElement("div",{className:"questions-container"},r.a.createElement("p",{className:"questions-category","data-testid":"question-category"},this.renderText("category")),r.a.createElement("p",{className:"questions-question","data-testid":"question-text"},this.renderText("question")),r.a.createElement("p",null,"Tempo restante: ".concat(a)),r.a.createElement("div",{"data-name":"answers-container",role:"presentation",type:"div","data-testid":"answer-options",onClick:function(t){return e.applyBorderColor(t.target,!0)}},this.renderQuestions()),r.a.createElement("div",null,c&&r.a.createElement(p.a,{to:"/feedback"}),n&&r.a.createElement("button",{"data-name":"btn-next",type:"button","data-testid":"btn-next",onClick:this.handleClickNext},"Pr\xf3xima")))))}}]),a}(r.a.Component),D=Object(s.b)(null,(function(e){return{storeScoreDispatch:function(t){return e(E(t))}}}))(A),Q=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){e.updateLocalStorage()},e.updateLocalStorage=function(){var t=e.props,a=t.name,n=t.picture,r=t.score;if(!a)return null;var c={name:a,score:r,picture:n},o=localStorage.getItem("ranking"),i=o?JSON.parse(o):[],s=[].concat(Object(w.a)(i),[c]);localStorage.setItem("ranking",JSON.stringify(s))},e.handleClickPlayAgain=function(){e.props.history.push("/")},e.handleClickRanking=function(){e.props.history.push("/ranking")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.score,a=e.assertions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null),r.a.createElement("div",{className:"feedback-container"},r.a.createElement("p",{"data-testid":"feedback-total-score"},"Pontua\xe7\xe3o final:"," ",t),r.a.createElement("p",{"data-testid":"feedback-total-question"},"Acertos:"," ",a),a<3?r.a.createElement("p",{"data-testid":"feedback-text"},"Could be better..."):r.a.createElement("p",{"data-testid":"feedback-text"},"Well Done!"),r.a.createElement("button",{className:"btn",name:"btnPlayAgain",onClick:this.handleClickPlayAgain,type:"button","data-testid":"btn-play-again"},"Play Again"),r.a.createElement("button",{className:"btn",name:"btnRanking",onClick:this.handleClickRanking,type:"button","data-testid":"btn-ranking"},"Ranking")))}}]),a}(r.a.Component),R=Object(s.b)((function(e){return{score:e.player.score,assertions:e.player.assertions,name:e.player.name,picture:e.player.photoUrl}}))(Q),P=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).getRankingAndRender=function(){var e=JSON.parse(localStorage.getItem("ranking"));if(!e)return null;var t=e.sort((function(e,t){return t.score-e.score}));return t.map((function(e,t){return a=e,n=t,r.a.createElement("div",{style:{border:"1px solid black"},key:"".concat(a.name).concat(n)},r.a.createElement("p",{"data-testid":"player-name-".concat(n)},a.name),r.a.createElement("p",{"data-testid":"player-score-".concat(n)},a.score));var a,n}))},e.handleClickPlayAgain=function(){e.props.history.push("/")},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("button",{name:"btnPlayAgain",onClick:this.handleClickPlayAgain,type:"button","data-testid":"btn-go-home"},"Play Again"),this.getRankingAndRender())}}]),a}(r.a.Component),I=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={questionList:[],loaded:!1,nextQuestion:!1,qNum:0,endQuestions:!1,time:30,optionsDisabled:!1,level:"",difficulty:0},e.componentDidMount=function(){e.fetchQuestions(),e.timer()},e.fetchQuestions=Object(h.a)(b.a.mark((function t(){var a,n,r,c,o,i,s,l,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.history,n=3,r=localStorage.getItem("token"),t.next=5,fetch("https://opentdb.com/api.php?amount=5&token=".concat(r));case 5:return c=t.sent,t.next=8,c.json();case 8:o=t.sent,o.response_code===n&&a.push("/"),console.log(o),i=o.results,s=Object(x.a)(i,1),l=s[0],console.log(l),u=l.difficulty,console.log(u),e.setState({questionList:i,loaded:!0,level:u},(function(){return e.setDifficulty()}));case 18:case"end":return t.stop()}}),t)}))),e.setDifficulty=function(){var t=e.state.level;switch(console.log(t),t){case"hard":e.setState({difficulty:3});break;case"medium":e.setState({difficulty:2});break;case"easy":e.setState({difficulty:1});break;default:return 0}},e.calculateScore=function(){var t=e.props.storeScoreDispatch,a=e.state,n=a.time,r=a.difficulty;console.log(n,r);var c=10+n*r;console.log(typeof c,c),t(c)},e.renderQuestions=function(){var t=e.state,a=t.questionList,n=t.qNum,c=t.optionsDisabled;if(!a[n])return null;var o=r.a.createElement("button",{className:"btn","data-answer":"correct",key:"correct",type:"button","data-testid":"correct-answer",disabled:c,onClick:e.calculateScore},a[n].correct_answer),i=a[n].incorrect_answers.map((function(e,t){return r.a.createElement("button",{className:"btn","data-answer":"incorrect",key:t,type:"button","data-testid":"wrong-answer-".concat(t),disabled:c},e)})),s=[o].concat(Object(w.a)(i)),l=[].concat(Object(w.a)(i),[o]);return Math.random()<.55?s:l},e.handleClick=function(t){var a=t.target;if(!a.type)return null;var n=a.parentElement;Array.from(n.children).forEach((function(e){"correct"===e.dataset.answer?e.style.border="3px solid rgb(6 ,240, 15)":e.style.border="3px solid rgb(255, 0, 0)"})),e.setState({nextQuestion:!0})},e.renderText=function(t){var a=e.state,n=a.questionList,r=a.qNum;return n[r]?n[r]["".concat(t)]:null},e.handleClickNext=function(){var t=e.state.qNum;t>3?e.setState({endQuestions:!0}):e.setState({qNum:t+1,nextQuestion:!0,time:30,optionsDisabled:!1},(function(){return e.timer()}))},e.timer=function(){var t=setInterval((function(){e.setState((function(e){return{time:e.time-1}}),(function(){0===e.state.time&&e.setState({optionsDisabled:!0},(function(){return clearInterval(t)}))}))}),1e3)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.time,a=e.loaded,n=e.nextQuestion,c=e.endQuestions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null),r.a.createElement("section",{className:"game-container"},r.a.createElement("div",{className:"questions-container"},r.a.createElement("p",{"data-testid":"question-category"},this.renderText("category")),r.a.createElement("p",{"data-testid":"question-text"},this.renderText("question")),r.a.createElement("p",null,"Tempo restante: ".concat(t)),r.a.createElement("div",{role:"presentation",type:"div","data-testid":"answer-options",onClick:this.handleClick},a&&this.renderQuestions()),r.a.createElement("div",null,c&&r.a.createElement(p.a,{to:"/feedback"}),n&&r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.handleClickNext},"Pr\xf3ximo")))))}}]),a}(r.a.Component),T=Object(s.b)(null,(function(e){return{storeScoreDispatch:function(t){return e(E(t))}}}))(I),_=(a(51),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:S}),r.a.createElement(p.b,{path:"/settings",component:C}),r.a.createElement(p.b,{path:"/game",component:D}),r.a.createElement(p.b,{path:"/feedback",component:R}),r.a.createElement(p.b,{path:"/ranking",component:P}),r.a.createElement(p.b,{path:"/shuffle",component:T}))}}]),a}(r.a.Component)),L=a(17),B=a(33),M=a(34),F=a(20),J={name:"Anderson",assertions:0,score:10,gravatarEmail:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_PLAYER":return Object(F.a)(Object(F.a)({},e),{},{gravatarEmail:t.payload.email,name:t.payload.name,photoUrl:t.payload.photo,score:0});case"STORE_SCORE":return Object(F.a)(Object(F.a)({},e),{},{score:e.score+t.payload,assertions:e.assertions+1});default:return e}},U=Object(L.combineReducers)({player:V}),W=Object(L.legacy_createStore)(U,{},Object(B.composeWithDevTools)(Object(L.applyMiddleware)(M.a)));window.Cypress&&(window.store=W);var Y=W;o.a.render(r.a.createElement(s.a,{store:Y},r.a.createElement(i.a,null,r.a.createElement(_,null))),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.15e0fd4c.chunk.js.map